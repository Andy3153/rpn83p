# This defines the hiercharcy of menu items using a custom DSL (Domain Specific
# Language). A script parses this file, then generates the Z80 assembly
# language statements which define data that can be used by the menu subsystem.
#
# Grammar (I really should learn something like eBNF properly):
#   node = (menuitem | menugroup)
#   menuitem = 'MenuItem' name label
#   menugroup =  'MenuGroup' name label '[' menustrip* ']'
#   menustrip = 'MenuStrip' '[' node*5 ']'
#   name = (alpha+ | '*')
#   label = (alpha+ | '*')
#   alpha = ( printableASCII | fonttag )
#   fonttag = '<' printableASCII+ '>'
#
# Semantics:
#   name: the display name for the menu
#   label: identifier for the node data in the assembly code, also used as
#       prefix for other identifiers (e.g. if the label="mNum", there will be
#       other identifiers such as "mNumId", "mNumNameId").
#   fonttag: a symbol from the TI-OS Small Font table, e.g. '<Sdegree>'
#
# Parsing rules:
#   - tokens are separated by spaces
#   - newlines are white spaces with no other meaning or behavior
#   - square brackets [ ] means "list of"
#   - '*' indicates a blank MenuItem with no ID constant

MenuGroup root mRoot [
  MenuStrip [
    MenuGroup NUM mNum [
      MenuStrip [
        MenuItem ^3 mCube
        MenuItem CBRT mCubeRoot # maybe use <super3><root> ?
        MenuItem ATN2 mAtan2
        MenuItem % mPercent
        MenuItem <Delta>% mDeltaPercent
      ]
      MenuStrip [
        MenuItem ABS mAbs
        MenuItem SIGN mSign
        MenuItem MOD mMod
        MenuItem MIN mMin
        MenuItem MAX mMax
      ]
      MenuStrip [
        MenuItem LCM mLcm
        MenuItem GCD mGcd
      ]
      MenuStrip [
        MenuItem IP mIntPart
        MenuItem FP mFracPart
        MenuItem TRUN mTruncate
        MenuItem ROND mRound
        MenuItem INTG mIntDown
      ]
    ]
    MenuGroup PROB mProb [
      MenuStrip [
        MenuItem PERM mPermutation
        MenuItem COMB mCombination
        MenuItem N! mFactorial
        MenuItem RND mRandom
        MenuItem SEED mRandomSeed
      ]
    ]
    MenuGroup CONV mConv [
      MenuStrip [
        MenuItem <rightarrow>DEG mRadToDeg
        MenuItem <rightarrow>RAD mDegToRad
        MenuItem * *
        MenuItem <rightarrow>REC mPolarToRect
        MenuItem <rightarrow>POL mRectToPolar
      ]
      MenuStrip [
        MenuItem <rightarrow>HR mHmsToHour
        MenuItem <rightarrow>HMS mHourToHms
      ]
      MenuStrip [
        MenuItem <rightarrow>UNIX mDateToUnixSeconds
        menuItem <rightarrow>DATE mUnixSecondsToDate
        menuItem LEAP mIsLeapYear
        menuItem <rightarrow>SEC mDaysToSeconds
        menuItem <rightarrow>DAYS mSecondsToDays
      ]
    ]
    MenuItem BASE mBase # placeholder, unimplemented
    MenuItem HELP mHelp
  ]
  MenuStrip [
    MenuGroup DISP mDisp [
      MenuStrip [
        MenuItem FIX mFix
        MenuItem SCI mSci
        MenuItem ENG mEng
        MenuItem * *
        MenuItem ALL mFloat
      ]
    ]
    MenuGroup MODE mMode [
      MenuStrip [
        MenuItem DEG mDeg
        MenuItem RAD mRad
        MenuItem GRAD mGrad
        MenuItem RECT mRect
        MenuItem PLR mPolar
      ]
    ]
    MenuGroup HYP mHyperbolic [
      MenuStrip [
        MenuItem * *
        MenuItem SINH mSinh
        MenuItem COSH mCosh
        MenuItem TANH mTanh
        MenuItem * *
      ]
      MenuStrip [
        MenuItem * *
        MenuItem ASNH mAsinh
        MenuItem ACSH mAcosh
        MenuItem ATNH mAtanh
        MenuItem * *
      ]
    ]
    MenuGroup UNIT mUnit [
      MenuStrip [
        MenuItem <rightarrow><degree>F mCToF
        MenuItem <rightarrow><degree>C mFToC
        MenuItem * *
        MenuItem <rightarrow>km mMiToKm
        MenuItem <rightarrow>mi mKmToMi
      ]
      MenuStrip [
        MenuItem <rightarrow>in mInToCm
        MenuItem <rightarrow>cm mCmToIn
        MenuItem * *
        MenuItem <rightarrow>m mFtToM
        MenuItem <rightarrow>ft mMToFt
      ]
      MenuStrip [
        MenuItem <rightarrow>kg mLbsToKg
        MenuItem <rightarrow>lbs mKgToLbs
        MenuItem * *
        MenuItem <rightarrow>oz mOzToG
        MenuItem <rightarrow>g mGToOz
      ]
      MenuStrip [
        MenuItem <rightarrow>ha mAcreToHectare
        MenuItem <rightarrow>acr mHectareToAcre
        MenuItem * *
        MenuItem * *
        MenuItem * *
      ]
      MenuStrip [
        MenuItem <rightarrow>L mGalToL
        MenuItem <rightarrow>gal mLToGal
        MenuItem * *
        MenuItem <rightarrow>mL mFlozToMl
        MenuItem <rightarrow>foz mMlToFloz
      ]
      MenuStrip [
        MenuItem <rightarrow>kJ mKcalToKj
        MenuItem <rightarrow>kCal mKjToKcal
        MenuItem * *
        MenuItem <rightarrow>kW mHorsepowerTokW
        MenuItem <rightarrow>hp mkWToHorsepower
      ]
      MenuStrip [
        MenuItem <rightarrow>mpg mMpgToL100km
        MenuItem <rightarrow>Lkm mL100kmToMpg
        MenuItem * *
        MenuItem <rightarrow>kPa mPsiToKpa
        MenuItem <rightarrow>psi mKpaToPsi
      ]
    ]
  ]
]
